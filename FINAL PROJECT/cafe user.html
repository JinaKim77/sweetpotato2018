<!DOCTYPE html>
<html>
	<head>
		<!-- General Bootstrap tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		
		<link href="stylesheet.css" rel="stylesheet" type="text/css">
		<title>User - JJA Cafe</title>
	</head>
	<body>
		<img src="pics/logo.gif" alt="logo" class="logo">
		<ul class="navBar">
		<li><a class="btn active" href="cafe index.html">Home</a></li>
		<li><a href="cafe booking.html" class="btn">Cafe Booking</a></li>
		<li><a href="cafe shop.html" class="btn">Cafe Shop</a></li>
		<li><a href="cafe index.html" class="btn">Opening Hours</a></li>
		<li><a href="how to brew.html" class="btn">How to brew</a></li>
		<li id="user"><a href="cafe user.html" class="btn">User <!--Will change from User to *Username* through innerHTML when log in details entered--> </a></li>
		<li id="login"><a href="" class="btn" data-toggle="modal" data-target="#modalLoginForm">Log In</a></li>
		</ul>
		
		<!-- Modal -->
		<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">Sign in</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body mx-3">
                        <div class="md-form mb-5">
                            <i class="fa fa-envelope prefix grey-text"></i>
                            <label data-error="wrong" data-success="right" for="defaultForm-email">Your email</label>
                            <input type="email" id="defaultForm-email" class="form-control validate">
                            <span id="emailMessage"></span>
                        </div>
        
                        <div class="md-form mb-4">
                            <i class="fa fa-lock prefix grey-text"></i>
                            <label data-error="wrong" data-success="right" for="defaultForm-pass">Your password</label>
                            <input type="password" id="defaultForm-pass" class="form-control validate">
                            <span id="passMessage"></span>
                        </div>

                        <span>Don't have an account yet? <span><a href="register.html">Register</a></span></span>
        
                    </div>
                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-default" id="modalLogIn" onclick="login()">Login</button>
                    </div>
                </div>
            </div>
        </div>
	
		<div id="options">
			<ul id="account">
				<li><button type="button" onclick="fillDetails()">Display Account Details</button></li><br>
				<li><button type="button" onclick="changeUsername()">Change Username</button></li><br>
				<li><button type="button" onclick="changeEmail()">Change Email</button></li>
				<li><button type="button" onclick="changePassword()">Change Password</button></li>
			</ul>
		</div>

		<div id="userDetails">
			<ul>
				<li id="usernameDetail"></li><br/>
				<li id="emailDetail"></li>
			</ul>
		</div>
		
		<a id="backButton" href="cafe index.html">[Back to home page]</a>
		
		
		<!-- Bootstrap tags -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	</body>
</html>

<script>
	function fillDetails() {
		document.getElementById("usernameDetail").innerHTML = "Username: "+localStorage.getItem("regUsername");
		document.getElementById("emailDetail").innerHTML = "Email: "+localStorage.getItem("regEmail");
	}

	function changeUsername() {
		var newUsername = String(prompt("Enter new Username: "));
		
		if(newUsername == "") {
			alert("You need to input a new Username");
		}else {
			localStorage.setItem("regUsername", newUsername);
			fillDetails()
		}
	}

	function changeEmail() {
		var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
		var newEmail = String(prompt("Enter new Email: "));

        if(newEmail == "") {
            alert("You need to input a new email");
        }else if(!filter.test(newEmail)) {
            alert("Invalid email format");
        }else {
			localStorage.setItem("regEmail", newEmail);
			fillDetails()
		}
	}

	function changePassword() {
		var newPass = String(prompt("Enter new Password: "));

		if(newPass == "") {
            alert("You need to input a new Password");
        }else {
			localStorage.setItem("regPassword", newPass);
			fillDetails()
		}
	}
</script>